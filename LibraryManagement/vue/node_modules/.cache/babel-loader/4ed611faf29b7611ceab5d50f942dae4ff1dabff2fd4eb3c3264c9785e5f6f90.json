{"ast":null,"code":"import router from \"@/router\";\nimport request from \"@/utils/request\";\n//   import { load } from \"mime\";\nimport Cookies from \"js-cookie\";\nexport default {\n  name: \"CategoryList\",\n  data() {\n    return {\n      admin: Cookies.get(\"admin\") ? JSON.parse(Cookies.get(\"admin\")) : {},\n      tableData: [],\n      dialogFormVisible: false,\n      total: 0,\n      form: {},\n      // 表单格式判断规则\n      rules: {\n        name: [{\n          required: true,\n          message: \"请输入分类名称\",\n          trigger: \"blur\"\n        }]\n      },\n      params: {\n        pageNum: 1,\n        pagesize: 10,\n        name: \"\"\n      },\n      index: false,\n      rules: {\n        name: [{\n          required: true,\n          message: \"请输入新密码\",\n          trigger: \"blur\"\n        }, {\n          min: 3,\n          max: 10,\n          message: \"密码长度不合规 「3 - 10」\",\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  created() {\n    this.load();\n  },\n  methods: {\n    load() {\n      request.get(\"/category/page\", {\n        params: this.params\n      }).then(res => {\n        if (res.code = \"200\") {\n          this.tableData = res.data.list;\n          this.total = res.data.total;\n        }\n      });\n    },\n    loadAsc() {\n      request.get(\"/category/pageAsc\", {\n        params: this.params\n      }).then(res => {\n        if (res.code = \"200\") {\n          this.tableData = res.data.list;\n          this.total = res.data.total;\n        }\n      });\n    },\n    del(id) {\n      request.delete(\"/category/delete/\" + id).then(res => {\n        if (res.code === \"200\") {\n          this.$notify.success(\"删除成功\");\n          this.load();\n        } else {\n          this.$notify.error(\"删除失败\");\n        }\n      });\n    },\n    reset() {\n      this.params = {\n        pageNum: 1,\n        pagesize: 10,\n        name: \"\"\n      };\n      this.load();\n    },\n    handelCurrentChange(pNum) {\n      // 点击分页按钮 触发分页\n      console.log(pNum);\n      this.params.pageNum = pNum;\n      this.load();\n    },\n    switchSort(index) {\n      if (this.index === true) {\n        this.loadAsc();\n      } else {\n        this.load();\n      }\n    }\n  }\n};","map":{"version":3,"names":["router","request","Cookies","name","data","admin","get","JSON","parse","tableData","dialogFormVisible","total","form","rules","required","message","trigger","params","pageNum","pagesize","index","min","max","created","load","methods","then","res","code","list","loadAsc","del","id","delete","$notify","success","error","reset","handelCurrentChange","pNum","console","log","switchSort"],"sources":["src/views/category/List.vue"],"sourcesContent":["<template>\n<div style=\"padding: 35px\">\n    <!-- 搜索表单 -->\n    <div style=\"margin-bottom: 20px\">\n        <!-- 检索输入框 -->\n        <el-input style=\"width: 140px\" placeholder=\"请输入分类 ID\" v-model=\"params.id\"></el-input>\n        <el-input style=\"margin-left: 5px; width: 160px\" placeholder=\"请输入分类名称\" v-model=\"params.name\"></el-input>\n\n        <el-button @click=\"load\" style=\"margin-left: 5px\" type=\"primary\"><i class=\"el-icon-search\"></i><span>搜索</span></el-button>\n        <el-button @click=\"reset\" style=\"margin-left: 5px\" type=\"warning\"><i class=\"el-icon-refresh\"></i><span>重置</span></el-button>\n\n        <el-button style=\"float: right; margin-right: 13px\" @click=\"$router.push('/addCategory')\" type=\"danger\"><i class=\"el-icon-refresh\"></i><span>添加分类</span></el-button>\n        <el-button @click=\"(index = !index), switchSort(index)\" style=\"float: right; margin-right: 0px\" type=\"primary\"><i class=\"el-icon-loading\"></i><span>{{ index ? \"倒序\" : \"正序\" }}</span></el-button>\n    </div>\n\n    <el-table :data=\"tableData\" stripe row-key=\"id\" default-expand-all>\n        <el-table-column prop=\"id\" width=\"90\" label=\"编号\"></el-table-column>\n        <el-table-column prop=\"name\" width=\"100\" label=\"分类名称\"></el-table-column>\n        <el-table-column prop=\"remark\" width=\"150\" label=\"备注\"></el-table-column>\n        <el-table-column prop=\"createTime\" width=\"150\" label=\"创建时间\"></el-table-column>\n        <el-table-column prop=\"updateTime\" width=\"150\" label=\"更新时间\"></el-table-column>\n\n        <el-table-column label=\"操作\" width=\"250\">\n            <template v-slot=\"scope\">\n                <el-button style=\"float: \" @click=\"\" type=\"primary\" size=\"mini\">添加子分类</el-button>\n                <el-button style=\"float: \" @click=\"$router.push('/editCategory?id=' + scope.row.id)\" type=\"primary\" size=\"mini\">编辑</el-button>\n                <el-popconfirm style=\"margin-left: 10px; float: \" title=\"您确定删除这行数据嘛？\" @confirm=\"del(scope.row.id)\">\n                    <el-button type=\"danger\" size=\"mini\" slot=\"reference\">删除</el-button>\n                </el-popconfirm>\n            </template>\n        </el-table-column>\n    </el-table>\n\n    <!-- 分页 -->\n    <div style=\"margin-top: 10px\">\n        <div class=\"block\">\n            <el-pagination current-page=\"params.pageNum\" page-size=\"params.pageSize\" layout=\"prev, pager, next\" @current-change=\"handelCurrentChange\" :total=\"total\">\n            </el-pagination>\n        </div>\n    </div>\n\n    <!-- 添加二级分类弹窗 -->\n    <el-dialog title=\"添加二级分类\" :visible.sync=\"dialogFormVisible\" width=\"30%\">\n        <el-form :model=\"form\" label-width=\"100px\" ref=\"formRef\" :rules=\"rules\">\n            <el-form-item label=\"分类名称\" prop=\"name\">\n                <el-input v-model=\"form.name\" autocomplete=\"off\" show-password></el-input>\n            </el-form-item>\n            <el-form-item label=\"分类备注\" prop=\"remark\">\n                <el-input v-model=\"form.remark\" autocomplete=\"off\" show-password></el-input>\n            </el-form-item>\n        </el-form>\n        <div slot=\"footer\" class=\"dialog-footer\">\n            <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\n            <el-button type=\"primary\" @click=\"savePass\">确 定</el-button>\n        </div>\n    </el-dialog>\n</div>\n</template>\n\n<script>\nimport router from \"@/router\";\nimport request from \"@/utils/request\";\n//   import { load } from \"mime\";\nimport Cookies from \"js-cookie\";\n\nexport default {\n    name: \"CategoryList\",\n\n    data() {\n        return {\n            admin: Cookies.get(\"admin\") ? JSON.parse(Cookies.get(\"admin\")) : {},\n            tableData: [],\n            dialogFormVisible: false,\n            total: 0,\n            form: {},\n            // 表单格式判断规则\n            rules: {\n                name: [{\n                    required: true,\n                    message: \"请输入分类名称\",\n                    trigger: \"blur\",\n                }, ],\n            },\n            params: {\n                pageNum: 1,\n                pagesize: 10,\n                name: \"\",\n            },\n            index: false,\n            rules: {\n                name: [{\n                    required: true,\n                    message: \"请输入新密码\",\n                    trigger: \"blur\"\n                }, {\n                    min: 3,\n                    max: 10,\n                    message: \"密码长度不合规 「3 - 10」\",\n                    trigger: 'blur'\n                }],\n\n            }\n        }; \n    },\n    created() {\n        this.load();\n    },\n    methods: {\n        load() {\n            request\n                .get(\"/category/page\", {\n                    params: this.params,\n                })\n                .then((res) => {\n                    if ((res.code = \"200\")) {\n                        this.tableData = res.data.list;\n                        this.total = res.data.total;\n                    }\n                });\n        },\n        loadAsc() {\n            request\n                .get(\"/category/pageAsc\", {\n                    params: this.params,\n                })\n                .then((res) => {\n                    if ((res.code = \"200\")) {\n                        this.tableData = res.data.list;\n                        this.total = res.data.total;\n                    }\n                });\n        },\n        del(id) {\n            request.delete(\"/category/delete/\" + id).then((res) => {\n                if (res.code === \"200\") {\n                    this.$notify.success(\"删除成功\");\n                    this.load();\n                } else {\n                    this.$notify.error(\"删除失败\");\n                }\n            });\n        },\n        reset() {\n            this.params = {\n                pageNum: 1,\n                pagesize: 10,\n                name: \"\",\n            };\n            this.load();\n        },\n        handelCurrentChange(pNum) {\n            // 点击分页按钮 触发分页\n            console.log(pNum);\n            this.params.pageNum = pNum;\n            this.load();\n        },\n        switchSort(index) {\n            if (this.index === true) {\n                this.loadAsc();\n            } else {\n                this.load();\n            }\n        },\n    },\n};\n</script>\n"],"mappings":"AA4DA,OAAAA,MAAA;AACA,OAAAC,OAAA;AACA;AACA,OAAAC,OAAA;AAEA;EACAC,IAAA;EAEAC,KAAA;IACA;MACAC,KAAA,EAAAH,OAAA,CAAAI,GAAA,YAAAC,IAAA,CAAAC,KAAA,CAAAN,OAAA,CAAAI,GAAA;MACAG,SAAA;MACAC,iBAAA;MACAC,KAAA;MACAC,IAAA;MACA;MACAC,KAAA;QACAV,IAAA;UACAW,QAAA;UACAC,OAAA;UACAC,OAAA;QACA;MACA;MACAC,MAAA;QACAC,OAAA;QACAC,QAAA;QACAhB,IAAA;MACA;MACAiB,KAAA;MACAP,KAAA;QACAV,IAAA;UACAW,QAAA;UACAC,OAAA;UACAC,OAAA;QACA;UACAK,GAAA;UACAC,GAAA;UACAP,OAAA;UACAC,OAAA;QACA;MAEA;IACA;EACA;EACAO,QAAA;IACA,KAAAC,IAAA;EACA;EACAC,OAAA;IACAD,KAAA;MACAvB,OAAA,CACAK,GAAA;QACAW,MAAA,OAAAA;MACA,GACAS,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAnB,SAAA,GAAAkB,GAAA,CAAAvB,IAAA,CAAAyB,IAAA;UACA,KAAAlB,KAAA,GAAAgB,GAAA,CAAAvB,IAAA,CAAAO,KAAA;QACA;MACA;IACA;IACAmB,QAAA;MACA7B,OAAA,CACAK,GAAA;QACAW,MAAA,OAAAA;MACA,GACAS,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAnB,SAAA,GAAAkB,GAAA,CAAAvB,IAAA,CAAAyB,IAAA;UACA,KAAAlB,KAAA,GAAAgB,GAAA,CAAAvB,IAAA,CAAAO,KAAA;QACA;MACA;IACA;IACAoB,IAAAC,EAAA;MACA/B,OAAA,CAAAgC,MAAA,uBAAAD,EAAA,EAAAN,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAM,OAAA,CAAAC,OAAA;UACA,KAAAX,IAAA;QACA;UACA,KAAAU,OAAA,CAAAE,KAAA;QACA;MACA;IACA;IACAC,MAAA;MACA,KAAApB,MAAA;QACAC,OAAA;QACAC,QAAA;QACAhB,IAAA;MACA;MACA,KAAAqB,IAAA;IACA;IACAc,oBAAAC,IAAA;MACA;MACAC,OAAA,CAAAC,GAAA,CAAAF,IAAA;MACA,KAAAtB,MAAA,CAAAC,OAAA,GAAAqB,IAAA;MACA,KAAAf,IAAA;IACA;IACAkB,WAAAtB,KAAA;MACA,SAAAA,KAAA;QACA,KAAAU,OAAA;MACA;QACA,KAAAN,IAAA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}