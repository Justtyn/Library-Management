{"ast":null,"code":"import router from \"@/router\";\nimport request from \"@/utils/request\";\n//   import { load } from \"mime\";\nimport Cookies from \"js-cookie\";\nexport default {\n  name: \"CategoryList\",\n  data() {\n    return {\n      admin: Cookies.get(\"admin\") ? JSON.parse(Cookies.get(\"admin\")) : {},\n      tableData: [],\n      total: 0,\n      form: {},\n      // 表单格式判断规则\n      rules: {\n        name: [{\n          required: true,\n          message: \"请输入分类名称\",\n          trigger: \"blur\"\n        }]\n      },\n      params: {\n        pageNum: 1,\n        pagesize: 10,\n        name: \"\"\n      },\n      index: false,\n      rules: {}\n    };\n  },\n  created() {\n    this.load();\n  },\n  methods: {\n    load() {\n      request.get(\"/category/page\", {\n        params: this.params\n      }).then(res => {\n        if (res.code = \"200\") {\n          this.tableData = res.data.list;\n          this.total = res.data.total;\n        }\n      });\n    },\n    loadAsc() {\n      request.get(\"/category/pageAsc\", {\n        params: this.params\n      }).then(res => {\n        if (res.code = \"200\") {\n          this.tableData = res.data.list;\n          this.total = res.data.total;\n        }\n      });\n    },\n    del(id) {\n      request.delete(\"/category/delete/\" + id).then(res => {\n        if (res.code === \"200\") {\n          this.$notify.success(\"删除成功\");\n          this.load();\n        } else {\n          this.$notify.error(\"删除失败\");\n        }\n      });\n    },\n    reset() {\n      this.params = {\n        pageNum: 1,\n        pagesize: 10,\n        name: \"\"\n      };\n      this.load();\n    },\n    handelCurrentChange(pNum) {\n      // 点击分页按钮 触发分页\n      console.log(pNum);\n      this.params.pageNum = pNum;\n      this.load();\n    },\n    switchSort(index) {\n      if (this.index === true) {\n        this.loadAsc();\n      } else {\n        this.load();\n      }\n    }\n  }\n};","map":{"version":3,"names":["router","request","Cookies","name","data","admin","get","JSON","parse","tableData","total","form","rules","required","message","trigger","params","pageNum","pagesize","index","created","load","methods","then","res","code","list","loadAsc","del","id","delete","$notify","success","error","reset","handelCurrentChange","pNum","console","log","switchSort"],"sources":["src/views/category/List.vue"],"sourcesContent":["<template>\n  <div style=\"padding: 35px\">\n    <!-- 搜索表单 -->\n    <div style=\"margin-bottom: 20px\">\n      <!-- 检索输入框 -->\n      <el-input\n        style=\"width: 140px\"\n        placeholder=\"请输入分类 ID\"\n        v-model=\"params.id\"\n      ></el-input>\n      <el-input\n        style=\"margin-left: 5px; width: 160px\"\n        placeholder=\"请输入分类名称\"\n        v-model=\"params.name\"\n      ></el-input>\n\n      <el-button @click=\"load\" style=\"margin-left: 5px\" type=\"primary\"\n        ><i class=\"el-icon-search\"></i><span>搜索</span></el-button\n      >\n      <el-button @click=\"reset\" style=\"margin-left: 5px\" type=\"warning\"\n        ><i class=\"el-icon-refresh\"></i><span>重置</span></el-button\n      >\n\n      <el-button\n        style=\"float: right; margin-right: 13px\"\n        @click=\"$router.push('/addCategory')\"\n        type=\"danger\"\n        ><i class=\"el-icon-refresh\"></i><span>添加分类</span></el-button\n      >\n      <el-button\n        @click=\"(index = !index), switchSort(index)\"\n        style=\"float: right; margin-right: 0px\"\n        type=\"primary\"\n        ><i class=\"el-icon-loading\"></i\n        ><span>{{ index ? \"倒序\" : \"正序\" }}</span></el-button\n      >\n    </div>\n\n    <el-table :data=\"tableData\" stripe row-key=\"id\" default-expand-all>\n      <el-table-column prop=\"id\" width=\"90\" label=\"编号\"></el-table-column>\n      <el-table-column\n        prop=\"name\"\n        width=\"100\"\n        label=\"分类名称\"\n      ></el-table-column>\n      <el-table-column prop=\"remark\" width=\"150\" label=\"备注\"></el-table-column>\n      <el-table-column\n        prop=\"createTime\"\n        width=\"150\"\n        label=\"创建时间\"\n      ></el-table-column>\n      <el-table-column\n        prop=\"updateTime\"\n        width=\"150\"\n        label=\"更新时间\"\n      ></el-table-column>\n\n      <el-table-column label=\"操作\" width=\"250\">\n        <template v-slot=\"scope\">\n          <el-button style=\"float: \" @click=\"\" type=\"primary\" size=\"mini\"\n            >添加子分类</el-button\n          >\n          <el-button\n            style=\"float: \"\n            @click=\"$router.push('/editCategory?id=' + scope.row.id)\"\n            type=\"primary\"\n            size=\"mini\"\n            >编辑</el-button\n          >\n          <el-popconfirm\n            style=\"margin-left: 10px; float: \"\n            title=\"您确定删除这行数据嘛？\"\n            @confirm=\"del(scope.row.id)\"\n          >\n            <el-button type=\"danger\" size=\"mini\" slot=\"reference\"\n              >删除</el-button\n            >\n          </el-popconfirm>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <!-- 分页 -->\n    <div style=\"margin-top: 10px\">\n      <div class=\"block\">\n        <el-pagination\n          current-page=\"params.pageNum\"\n          page-size=\"params.pageSize\"\n          layout=\"prev, pager, next\"\n          @current-change=\"handelCurrentChange\"\n          :total=\"total\"\n        >\n        </el-pagination>\n      </div>\n    </div>\n\n    <!-- 添加二级分类弹窗 -->\n    <el-dialog title=\"修改密码\" :visible.sync=\"dialogFormVisible\" width=\"30%\">\n      <el-form :model=\"form\" label-width=\"100px\" ref=\"formRef\" :rules=\"rules\">\n        <el-form-item label=\"新密码\" prop=\"newPass\">\n          <el-input\n            v-model=\"form.newPass\"\n            autocomplete=\"off\"\n            show-password\n          ></el-input>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"savePass\">确 定</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport router from \"@/router\";\nimport request from \"@/utils/request\";\n//   import { load } from \"mime\";\nimport Cookies from \"js-cookie\";\n\nexport default {\n  name: \"CategoryList\",\n\n  data() {\n    return {\n      admin: Cookies.get(\"admin\") ? JSON.parse(Cookies.get(\"admin\")) : {},\n      tableData: [],\n      total: 0,\n      form: {},\n      // 表单格式判断规则\n      rules: {\n        name: [\n          {\n            required: true,\n            message: \"请输入分类名称\",\n            trigger: \"blur\",\n          },\n        ],\n      },\n      params: {\n        pageNum: 1,\n        pagesize: 10,\n        name: \"\",\n      },\n      index: false,\n      rules: {},\n    };\n  },\n  created() {\n    this.load();\n  },\n  methods: {\n    load() {\n      request\n        .get(\"/category/page\", {\n          params: this.params,\n        })\n        .then((res) => {\n          if ((res.code = \"200\")) {\n            this.tableData = res.data.list;\n            this.total = res.data.total;\n          }\n        });\n    },\n    loadAsc() {\n      request\n        .get(\"/category/pageAsc\", {\n          params: this.params,\n        })\n        .then((res) => {\n          if ((res.code = \"200\")) {\n            this.tableData = res.data.list;\n            this.total = res.data.total;\n          }\n        });\n    },\n    del(id) {\n      request.delete(\"/category/delete/\" + id).then((res) => {\n        if (res.code === \"200\") {\n          this.$notify.success(\"删除成功\");\n          this.load();\n        } else {\n          this.$notify.error(\"删除失败\");\n        }\n      });\n    },\n    reset() {\n      this.params = {\n        pageNum: 1,\n        pagesize: 10,\n        name: \"\",\n      };\n      this.load();\n    },\n    handelCurrentChange(pNum) {\n      // 点击分页按钮 触发分页\n      console.log(pNum);\n      this.params.pageNum = pNum;\n      this.load();\n    },\n    switchSort(index) {\n      if (this.index === true) {\n        this.loadAsc();\n      } else {\n        this.load();\n      }\n    },\n  },\n};\n</script>\n"],"mappings":"AAoHA,OAAAA,MAAA;AACA,OAAAC,OAAA;AACA;AACA,OAAAC,OAAA;AAEA;EACAC,IAAA;EAEAC,KAAA;IACA;MACAC,KAAA,EAAAH,OAAA,CAAAI,GAAA,YAAAC,IAAA,CAAAC,KAAA,CAAAN,OAAA,CAAAI,GAAA;MACAG,SAAA;MACAC,KAAA;MACAC,IAAA;MACA;MACAC,KAAA;QACAT,IAAA,GACA;UACAU,QAAA;UACAC,OAAA;UACAC,OAAA;QACA;MAEA;MACAC,MAAA;QACAC,OAAA;QACAC,QAAA;QACAf,IAAA;MACA;MACAgB,KAAA;MACAP,KAAA;IACA;EACA;EACAQ,QAAA;IACA,KAAAC,IAAA;EACA;EACAC,OAAA;IACAD,KAAA;MACApB,OAAA,CACAK,GAAA;QACAU,MAAA,OAAAA;MACA,GACAO,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAhB,SAAA,GAAAe,GAAA,CAAApB,IAAA,CAAAsB,IAAA;UACA,KAAAhB,KAAA,GAAAc,GAAA,CAAApB,IAAA,CAAAM,KAAA;QACA;MACA;IACA;IACAiB,QAAA;MACA1B,OAAA,CACAK,GAAA;QACAU,MAAA,OAAAA;MACA,GACAO,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAhB,SAAA,GAAAe,GAAA,CAAApB,IAAA,CAAAsB,IAAA;UACA,KAAAhB,KAAA,GAAAc,GAAA,CAAApB,IAAA,CAAAM,KAAA;QACA;MACA;IACA;IACAkB,IAAAC,EAAA;MACA5B,OAAA,CAAA6B,MAAA,uBAAAD,EAAA,EAAAN,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAM,OAAA,CAAAC,OAAA;UACA,KAAAX,IAAA;QACA;UACA,KAAAU,OAAA,CAAAE,KAAA;QACA;MACA;IACA;IACAC,MAAA;MACA,KAAAlB,MAAA;QACAC,OAAA;QACAC,QAAA;QACAf,IAAA;MACA;MACA,KAAAkB,IAAA;IACA;IACAc,oBAAAC,IAAA;MACA;MACAC,OAAA,CAAAC,GAAA,CAAAF,IAAA;MACA,KAAApB,MAAA,CAAAC,OAAA,GAAAmB,IAAA;MACA,KAAAf,IAAA;IACA;IACAkB,WAAApB,KAAA;MACA,SAAAA,KAAA;QACA,KAAAQ,OAAA;MACA;QACA,KAAAN,IAAA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}